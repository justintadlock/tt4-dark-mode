import{store as e}from"@wordpress/interactivity";const o=window.matchMedia("(prefers-color-scheme: dark)"),{callbacks:t,state:c}=e("tt4-dark-mode/color-scheme",{state:{get isLoggedIn(){return 0<c.userId}},actions:{toggle(){if(c.isDark=!c.isDark,c.colorScheme=c.isDark?"dark":"light",c.isLoggedIn)return void wp.apiFetch({path:`/wp/v2/users/${c.userId}`,method:"POST",data:{meta:{[c.name]:c.colorScheme}}});let e=c.cookiePath||"/",o=c.cookieDomain?"; domain="+c.cookieDomain:"";document.cookie=`${c.name}=${c.colorScheme};path=${e}${o}`}},callbacks:{init(){"dark"!==c.colorScheme&&"light"!==c.colorScheme&&(c.isDark=o.matches)},updateScheme(){document.documentElement.style.setProperty("color-scheme",c.colorScheme)}}});o.addEventListener("change",()=>{t.init()});